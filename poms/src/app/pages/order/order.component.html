<!-- Page Content -->
<div class="page-container">
  <div cdkDropListGroup>
    <div class="half-container">
      <h1 id="heading">Gruppierte Aufträge</h1>
      <button class="button-style" (click)="openDialogFilterGroups()">
        Filter Pop
      </button>
      <button class="button-style" (click)="resetGroupFilter()">Reset</button>
      <button
        id="new-group-button"
        (click)="newGroup()"
        cdkDropList
        (cdkDropListDropped)="dropNewGroup($event)"
      >
        <b>+</b> Aufträge hierhinziehen um neue Gruppe zu erstellen
      </button>
      <div class="expand-print">
        <mat-expansion-panel
          *ngFor="let group of filteredGroupData"
          class="expand-collapse"
          cdkDropList
          [cdkDropListData]="group.orders"
          (cdkDropListDropped)="drop($event)"
        >
          <mat-expansion-panel-header>
            <mat-panel-title>
              <div class="titel-expand-collapse">
                <p id="order-heading">
                  Gruppe: {{ group.groupId }}, Aufträge:
                  {{ group.orders.length }}
                </p>
              </div>
            </mat-panel-title>
            <div id="button-space">
              <button class="button-style" (click)="onClick()">Drucken</button>
            </div>
          </mat-expansion-panel-header>
          <div (click)="onDelete()">Löschen</div>
          <div class="draggable-card-container">
            <app-order-card
              *ngFor="let orderCard of group.orders"
              cdkDragBoundary=".page-container"
              cdkDrag
              [order]="orderCard"
            >
            </app-order-card>
          </div>
        </mat-expansion-panel>
      </div>
      <!-- <button class="expand-collapse" (click)="onClick()">drucken</button>
    </div> -->
    </div>
    <div class="half-container">
      <div>
        Unzugeordnete Aufträge, Aufträge: {{ filteredUngroupedOrders.length }}
        <button class="button-style" (click)="openDialogFilterOrders()">
          Filter Pop
        </button>
        <button class="button-style" (click)="resetOrderFilter()">Reset</button>
      </div>
      <!-- Draggable Cards, take the cards from one List to the other List -->
      <div
        class="draggable-card-container"
        cdkDropList
        [cdkDropListData]="allUngroupedOrders"
        (cdkDropListDropped)="drop($event)"
      >
        <!-- Plus-Button to create a new Order -->
        <div class="create-new-order" (click)="openDialogCreateNewOrder()">
          <img src="../../../assets/svg/plus-order.svg" />
        </div>

        <div *ngIf="newOrder">
          <div (click)="openDialogCreateNewOrder(this)">Test</div>
        </div>
        <!-- Show all Order-Cards with Layout from Order-Card -->
        <app-order-card
          *ngFor="let orderCard of filteredUngroupedOrders"
          cdkDragBoundary=".page-container"
          cdkDrag
          [order]="orderCard"
        >
        </app-order-card>
        <p *ngIf="filteredUngroupedOrders.length == 0">
          Es sind keine Aufträge mehr vorhanden oder keine treffen auf die
          Filterung zu.
        </p>
      </div>
    </div>
  </div>
</div>
